import{a as ae,b as ne,c as ie,d as re,e as oe,f as le,g as ce,h as me,i as se,j as pe,k as de,l as A,m as P,n as ue,p as T}from"./chunk-N6UEQAJC.js";import{a as Ce}from"./chunk-2X63TOLZ.js";import{a as O}from"./chunk-O4K67Y33.js";import{a as Me}from"./chunk-5UZ3WL22.js";import{d as ve}from"./chunk-SKXK7KA7.js";import{c as Se,d as _e,e as be,h as xe,i as we}from"./chunk-FX4T5NY5.js";import{b as M,c as J,d as K,g as v,j as y}from"./chunk-655M5PPB.js";import{D as ge,E as he,l as fe}from"./chunk-P2K7FNZD.js";import{k as te}from"./chunk-LTQGHVNP.js";import{b as U,d as S,g as W,i as X,k as N,n as Y,o as Z,s as ee,x as D}from"./chunk-QVV4KUCD.js";import{Ab as m,Cb as R,Gb as H,Lb as i,Mb as n,Nb as g,Ob as b,Pb as x,Rb as h,Ub as p,Uc as $,Wb as d,Ya as l,ca as s,cc as k,dc as q,eb as F,ec as Q,fc as o,gb as G,gc as w,hc as L,ka as u,kb as _,la as f,nc as z,qb as C,rc as B,sc as j,xa as I}from"./chunk-42JAANS2.js";var E=class t{dialogRef=s(Se);data=s(_e);newSerialData=G(this.data);serialFormGroup=new X({quantity:new N(this.newSerialData().cardNumber,[S.required,S.max(1e3)]),name:new N("",[S.required,S.minLength(2)])});createSerial(){this.serialFormGroup.value.quantity&&this.serialFormGroup.value.name&&this.serialFormGroup.valid&&this.dialogRef.close({cardNumber:this.serialFormGroup.value.quantity,serialName:this.serialFormGroup.value.name})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=_({type:t,selectors:[["app-create-serial-dialog"]],inputs:{newSerialData:[1,"newSerialData"]},outputs:{newSerialData:"newSerialDataChange"},decls:17,vars:2,consts:[[1,"generate-serial-content-div"],["appearance","outline"],["matInput","","placeholder","Cantidad de cartones","type","number","min","5",3,"formControl"],["matInput","","placeholder","Nombre del serial",3,"formControl"],["text","Confirmar","color","primary","heightClass","50px","widthClass","150px","fontSize","16px",1,"button",3,"click"]],template:function(e,r){e&1&&(i(0,"h2"),o(1,"Crea un nuevo serial"),n(),i(2,"mat-dialog-content",0)(3,"mat-form-field",1)(4,"mat-label"),o(5,"Cantidad de cartones"),n(),g(6,"input",2),i(7,"mat-hint"),o(8,"min 5 cartas"),n()(),i(9,"mat-form-field",1)(10,"mat-label"),o(11,"Nombre del serial"),n(),g(12,"input",3),i(13,"mat-hint"),o(14,"min 2 caracteres"),n()()(),i(15,"mat-dialog-actions")(16,"app-rectanglebutton",4),p("click",function(){return r.createSerial()}),n()()),e&2&&(l(6),m("formControl",r.serialFormGroup.controls.quantity),l(6),m("formControl",r.serialFormGroup.controls.name))},dependencies:[v,J,y,M,D,U,Y,W,ee,Z,O,xe,we],styles:[".generate-serial-content-div[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.button[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}h2[_ngcontent-%COMP%]{color:#7b2cbf;text-align:center}"]})};var Te=()=>[5,10];function Oe(t,a){t&1&&(i(0,"th",18),o(1," Nombre "),n())}function Ee(t,a){if(t&1&&(i(0,"td",19),o(1),n()),t&2){let e=a.$implicit;l(),w(e.serialName)}}function Fe(t,a){t&1&&(i(0,"th",20),o(1," N\xFAmero de Cartas "),n())}function ke(t,a){if(t&1&&(i(0,"td",19),o(1),n()),t&2){let e=a.$implicit;l(),w(e.cardQuantity)}}function Ne(t,a){t&1&&(i(0,"th",20),o(1," Fecha de creaci\xF3n "),n())}function Ve(t,a){if(t&1&&(i(0,"td",19),o(1),B(2,"date"),n()),t&2){let e=a.$implicit;l(),w(j(2,1,e.creationDate))}}function Ie(t,a){t&1&&g(0,"tr",21)}function Ge(t,a){if(t&1&&(i(0,"tr",22)(1,"td",23),o(2),n()()),t&2){d();let e=Q(6);l(2),L('no se encontro un serial con el nombre "',e.value,'"')}}function Re(t,a){if(t&1){let e=h();i(0,"tr",24),p("click",function(){let c=u(e).$implicit,V=d();return f(V.selectedSerial=c)}),n()}if(t&2){let e=a.$implicit,r=d();R("selected-row",r.selectedSerial==e)}}function He(t,a){if(t&1){let e=h();i(0,"div",17)(1,"app-rectanglebutton",25),p("click",function(){u(e);let c=d();return f(c.createSerial())}),n(),i(2,"div",26)(3,"app-rectanglebutton",27),p("click",function(){u(e);let c=d();return f(c.attachSerialToActualGame(c.selectedSerial))}),n()(),i(4,"button",28),o(5,"Siguiente"),n()()}if(t&2){let e=d();l(3),m("disabled",!e.ableToAttach)}}function qe(t,a){if(t&1){let e=h();i(0,"div",17)(1,"app-rectanglebutton",25),p("click",function(){u(e);let c=d();return f(c.createSerial())}),n()()}}var De=class t{dataSource=new A;useToGenerate=I(!1);columns=["serialName","cardQuantity","creationDate"];serialService=s(Ce);gameService=s(he);selectedSerial;ableToAttach=!0;snackbar=s(ge);dialog=s(be);sort=F.required(P);paginator=F.required(T);ngAfterViewInit(){this.dataSource.sort=this.sort(),this.dataSource.paginator=this.paginator(),this.gameService.gameCards().length>0&&(this.ableToAttach=!1)}applyFilter(a){let e=a.target.value;this.dataSource.filter=e.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}ngOnInit(){this.serialService.getSerials().subscribe({next:a=>{this.dataSource=new A(a),this.dataSource.sort=this.sort(),this.dataSource.paginator=this.paginator()}}),this.gameService.gameCards().length>0&&(this.ableToAttach=!1)}attachSerialToActualGame(a){a?this.dialog.open(Me,{data:!1}).afterClosed().subscribe(e=>{e==!0&&(this.gameService.attachSerialToActualGame(a),this.ableToAttach=!1)}):this.snackbar.error("selecciona un serial de la tabla")}createSerial(){this.dialog.open(E,{data:{cardNumber:0,serialName:""}}).afterClosed().subscribe(a=>{a&&this.serialService.createSerial(a).subscribe({next:e=>{e&&this.serialService.getSerials().subscribe({next:r=>{this.dataSource=new A(r),this.dataSource.sort=this.sort(),this.dataSource.paginator=this.paginator()}})}})})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=_({type:t,selectors:[["app-attach-serial-content"]],viewQuery:function(e,r){e&1&&(k(r.sort,P,5),k(r.paginator,T,5)),e&2&&q(2)},inputs:{useToGenerate:[1,"useToGenerate"]},decls:25,vars:7,consts:[["input",""],[1,"attach-serial-content-div"],[1,"created-serials-section"],["appearance","outline",1,"serial-searcher"],["matInput","","placeholder","Buscar por nombre...",3,"keyup"],["matSuffix",""],["mat-table","","matSort","",1,"example-table",3,"dataSource"],["matColumnDef","serialName"],["class","serial-table-header","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","cardQuantity"],["class","serial-table-header","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","creationDate"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matNoDataRow"],["mat-row","",3,"selected-row","click",4,"matRowDef","matRowDefColumns"],["pageSize","10","aria-label","Elige pagina de seriales",3,"showFirstLastButtons","pageSizeOptions"],[1,"generate-serial-content-div"],["mat-header-cell","",1,"serial-table-header"],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"serial-table-header"],["mat-header-row",""],["mat-row",""],["colspan","4"],["mat-row","",3,"click"],["text","Crear Serial","color","primary","heightClass","50px","widthClass","150px","fontSize","16px",1,"button",3,"click"],[1,"button-div"],["text","Adjuntar Serial Seleccionado","color","primary","heightClass","50px","widthClass","150px","fontSize","16px",1,"attach-serial-button",3,"click","disabled"],["mat-raised-button","","matStepperNext",""]],template:function(e,r){if(e&1){let c=h();i(0,"div",1)(1,"div",2)(2,"mat-form-field",3)(3,"mat-label"),o(4,"Buscar por nombre..."),n(),i(5,"input",4,0),p("keyup",function(ye){return u(c),f(r.applyFilter(ye))}),n(),i(7,"mat-icon",5),o(8,"search"),n()(),i(9,"table",6),b(10,7),C(11,Oe,2,0,"th",8)(12,Ee,2,1,"td",9),x(),b(13,10),C(14,Fe,2,0,"th",11)(15,ke,2,1,"td",9),x(),b(16,12),C(17,Ne,2,0,"th",11)(18,Ve,3,3,"td",9),x(),C(19,Ie,1,0,"tr",13)(20,Ge,3,1,"tr",14)(21,Re,1,2,"tr",15),n(),g(22,"mat-paginator",16),n(),C(23,He,6,1,"div",17)(24,qe,2,0,"div",17),n()}e&2&&(l(9),m("dataSource",r.dataSource),l(10),m("matHeaderRowDef",r.columns),l(2),m("matRowDefColumns",r.columns),l(),m("showFirstLastButtons",!0)("pageSizeOptions",z(6,Te)),l(),H(r.useToGenerate()===!1?23:24))},dependencies:[v,y,te,K,M,ae,P,re,oe,le,ue,$,se,pe,ie,ne,ce,me,de,T,O,D,ve,fe],styles:[".serial-searcher[_ngcontent-%COMP%]{min-width:100%;margin-bottom:1rem}.serial-searcher[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{background:#fff;border-radius:8px}.attach-serial-content-div[_ngcontent-%COMP%]{padding:2rem;display:grid;grid-template-columns:4fr 1fr;grid-gap:2rem;background-color:#f7f7f7;border-radius:10px;box-shadow:0 4px 10px #0000001a}.example-table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%;background-color:#fff;border:1px solid #ddd;border-radius:10px;box-shadow:0 2px 5px #0000001a;overflow:hidden}.example-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .example-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem;text-align:left;font-size:.9rem}.example-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#7b2cbf;color:#fff;font-weight:700}.example-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#fca311}.example-table[_ngcontent-%COMP%]   .mat-column-cardQuantity[_ngcontent-%COMP%], .example-table[_ngcontent-%COMP%]   .mat-column-creationDate[_ngcontent-%COMP%], .example-table[_ngcontent-%COMP%]   .mat-column-serialName[_ngcontent-%COMP%]{border:1px solid #ddd}.serial-table-header[_ngcontent-%COMP%]{color:#7b2cbf}.mat-column-cardQuantity[_ngcontent-%COMP%], .mat-column-creationDate[_ngcontent-%COMP%], .mat-column-serialName[_ngcontent-%COMP%]{border:1px solid black}.button-div[_ngcontent-%COMP%]{display:flex;flex-direction:column;place-content:center;place-items:center}.selected-row[_ngcontent-%COMP%]{background-color:#7b2cbf;color:#fff;font-weight:700}.generate-serial-content-div[_ngcontent-%COMP%]{display:flex;flex-direction:column;place-content:center;gap:1rem}.button[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}@media (max-width: 900px){.attach-serial-content-div[_ngcontent-%COMP%]{padding-top:1.5rem;display:grid;grid-template-rows:4fr 1fr;grid-template-columns:1fr;grid-gap:1rem;place-content:center}}"]})};export{De as a};
