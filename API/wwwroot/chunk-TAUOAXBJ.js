import{a as Z,b as tt,d as et,e as nt,f as R,g as it,h as G,i as ot}from"./chunk-SXEZC4LE.js";import{a as w}from"./chunk-YC5VOW7R.js";import{a as Q}from"./chunk-WABPTNBF.js";import{a as h}from"./chunk-Z5OLNT4A.js";import{d as Y}from"./chunk-SKXK7KA7.js";import{c as J,d as K,e as U,g as W,h as X}from"./chunk-FX4T5NY5.js";import{b as $,d as j,g as H,j as q}from"./chunk-655M5PPB.js";import{E as z,l as T,m as k}from"./chunk-P2K7FNZD.js";import{k as E}from"./chunk-LTQGHVNP.js";import"./chunk-4VZRQQ4V.js";import"./chunk-QVV4KUCD.js";import"./chunk-2PPFUFFT.js";import{Ab as x,Gb as P,Hb as g,Jb as v,Kb as b,Lb as i,Mb as o,Nb as S,Rb as M,Ub as s,Wb as d,Ya as p,ca as m,fc as r,gb as V,gc as I,hc as y,ka as f,kb as u,la as _,qb as C,xa as D}from"./chunk-42JAANS2.js";import"./chunk-C6Q5SG76.js";function rt(n,e){if(n&1){let t=M();i(0,"div",2),S(1,"app-pattern-card",3),i(2,"h3",4),r(3),o(),i(4,"button",5),s("click",function(){let l=f(t).$implicit,c=d();return _(c.removeFromRound(l))}),r(5,"Quitar de la partida"),o()()}if(n&2){let t=e.$implicit;p(),x("editable",!1)("pattern",t.patternMatrix),p(2),I(t.patternName)}}var L=class n{round=D.required();roundPatterns=[];roundService=m(h);ngOnInit(){this.roundService.getPatternsByRoundId(this.round().id).subscribe({next:e=>{this.roundPatterns=e}})}reloadRoundPatterns(){this.roundService.getPatternsByRoundId(this.round().id).subscribe({next:e=>{this.roundPatterns=e}})}removeFromRound(e){this.roundService.deletePatternFromRound(this.round().id,e.id).subscribe({next:t=>{t&&this.roundService.getPatternsByRoundId(this.round().id).subscribe({next:a=>{this.roundPatterns=a}})}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=u({type:n,selectors:[["app-round-patterns-list"]],inputs:{round:[1,"round"]},decls:10,vars:1,consts:[[1,"in-game-patterns"],["mat-icon-button","",3,"click"],[1,"pattern-data-div"],[3,"editable","pattern"],[1,"pattern-name-text"],["mat-flat-button","",3,"click"]],template:function(t,a){t&1&&(i(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title"),r(3),o()(),i(4,"div",0)(5,"button",1),s("click",function(){return a.reloadRoundPatterns()}),i(6,"mat-icon"),r(7,"cached"),o()(),v(8,rt,6,3,"div",2,g),o()()),t&2&&(p(3),y(" ",a.round().roundName," "),p(5),b(a.roundPatterns))},dependencies:[T,w,tt,et,Z,E,k],styles:[".in-game-patterns[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-height:600px;overflow-y:scroll;align-items:center}.pattern-data-div[_ngcontent-%COMP%]{max-width:196px}"]})};function pt(n,e){if(n&1&&(i(0,"div",1),S(1,"app-round-patterns-list",2),o()),n&2){let t=d().$implicit;p(),x("round",t)}}function mt(n,e){if(n&1&&C(0,pt,2,1,"div",1),n&2){let t=e.$implicit;P(t.id?0:-1)}}var N=class n{roundService=m(h);ngOnInit(){this.roundService.getRounds()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=u({type:n,selectors:[["app-game-pattern-section-list"]],decls:5,vars:0,consts:[[1,"pattern-section-title"],[1,"selected-patterns-div"],[3,"round"]],template:function(t,a){t&1&&(i(0,"h1",0),r(1,"Patrones seleccionados"),o(),i(2,"mat-accordion"),v(3,mt,1,1,null,null,g),o()),t&2&&(p(3),b(a.roundService.actualRounds()))},dependencies:[L,nt],encapsulation:2})};function dt(n,e){if(n&1){let t=M();i(0,"button",4),s("click",function(){f(t);let l=d().$implicit,c=d();return _(c.addToRound(l.id))}),r(1),o()}if(n&2){let t=d().$implicit;p(),y("A\xF1adir a ",t.roundName,"")}}function lt(n,e){if(n&1&&C(0,dt,2,1,"button",3),n&2){let t=e.$implicit;P(t.id?0:-1)}}var A=class n{dialogRef=m(J);data=m(K);modelData=V(this.data);roundService=m(h);addToRound(e){this.roundService.addPatternToRound(e,this.data.id).subscribe({next:t=>{this.dialogRef.close(!0)}})}ngOnInit(){this.roundService.getRounds()}addToEveryRound(){this.roundService.actualRounds().forEach(e=>{this.addToRound(e.id)})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=u({type:n,selectors:[["app-add-pattern-to-round-dialog"]],inputs:{modelData:[1,"modelData"]},outputs:{modelData:"modelDataChange"},decls:8,vars:1,consts:[["mat-dialog-title",""],[1,"add-patterns-content"],["mat-flat-button","",3,"click"],["mat-stroked-button",""],["mat-stroked-button","",3,"click"]],template:function(t,a){t&1&&(i(0,"h2",0),r(1),o(),i(2,"mat-dialog-content")(3,"div",1),v(4,lt,1,1,null,null,g),i(6,"button",2),s("click",function(){return a.addToEveryRound()}),r(7,"A\xF1adir a todas las rondas"),o()()()),t&2&&(p(),y('Adjuntar "',a.modelData().patternName,'" a:'),p(3),b(a.roundService.actualRounds()))},dependencies:[T,X,W],styles:[".add-patterns-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem}"]})};function st(n,e){if(n&1){let t=M();i(0,"button",13),s("click",function(){f(t);let l=d().$implicit,c=d();return _(c.openAddPatternToRoundDialog(l))}),i(1,"mat-icon"),r(2,"add"),o()()}}function ct(n,e){if(n&1){let t=M();i(0,"div",6),S(1,"app-pattern-card",7),i(2,"h3",8),r(3),o(),i(4,"div",9),C(5,st,3,0,"button",10),i(6,"button",11),s("click",function(){let l=f(t).$implicit,c=d();return _(c.openEditPatternDialog(l))}),i(7,"mat-icon"),r(8,"edit"),o()(),i(9,"button",12),s("click",function(){let l=f(t).$implicit,c=d();return _(c.deletePattern(l))}),i(10,"mat-icon"),r(11,"delete"),o()()()()}if(n&2){let t=e.$implicit,a=d();p(),x("editable",!1)("pattern",t.patternMatrix),p(2),I(t.patternName),p(2),P(a.inGame()?5:-1)}}var B=class n{inGame=D(!1);patternService=m(ot);gameService=m(z);dialog=m(U);openEditPatternDialog(e){this.dialog.open(G,{data:e}).afterClosed().subscribe(a=>{a!==void 0&&a.pattern!=R?this.patternService.updatePattern(a):this.patternService.getPatterns()})}openCreatePatternDialog(){this.dialog.open(G,{data:R}).afterClosed().subscribe(t=>{t!==void 0&&t.pattern!=R&&(this.patternService.postPattern(t),this.patternService.getPatterns(),R.patternMatrix=it,R.patternName="")})}ngOnInit(){this.patternService.getPatterns()}filterPatterns(e){this.patternService.getPatterns(e.target.value)}openAddPatternToRoundDialog(e){this.dialog.open(A,{data:e}).afterClosed().subscribe(t=>{})}deletePattern(e){this.patternService.deletePattern(e.id)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=u({type:n,selectors:[["app-pattern-list-component"]],inputs:{inGame:[1,"inGame"]},decls:14,vars:0,consts:[[1,"pattern-section-title"],["matTooltip","a\xF1adir patron","mat-icon-button","",3,"click"],["appearance","outline"],["matInput","","placeholder","Buscar Por Nombre",3,"keyup"],["matSuffix",""],[1,"created-patterns-div"],[1,"pattern-data-div"],[3,"editable","pattern"],[1,"pattern-name-text"],[1,"existent-pattern-actions"],["mat-icon-button",""],["mat-icon-button","","matTooltip","editar patron",3,"click"],["mat-icon-button","","matTooltip","eliminar patron",3,"click"],["mat-icon-button","",3,"click"]],template:function(t,a){t&1&&(i(0,"h1",0),r(1,"Patrones existentes"),o(),i(2,"button",1),s("click",function(){return a.openCreatePatternDialog()}),i(3,"mat-icon"),r(4,"add"),o()(),i(5,"mat-form-field",2)(6,"mat-label"),r(7,"Buscar Por Nombre"),o(),i(8,"input",3),s("keyup",function(c){return a.filterPatterns(c)}),o(),i(9,"mat-icon",4),r(10,"search"),o()(),i(11,"div",5),v(12,ct,12,4,"div",6,g),o()),t&2&&(p(12),b(a.patternService.patterns()))},dependencies:[H,E,k,q,$,j,Q,w],styles:[".pattern-name-text[_ngcontent-%COMP%]{color:#fca311}.pattern-section-title[_ngcontent-%COMP%]{color:#7b2cbf}.existent-pattern-actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;place-content:space-around;background-color:#9d4edd;border-radius:.5rem;width:90%}.created-patterns-div[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow-y:scroll;overflow-x:hidden;max-height:575px;gap:1rem}.pattern-data-div[_ngcontent-%COMP%]{border-radius:.5rem;border:2px solid #7b2cbf;display:flex;flex-direction:column;max-width:196px;align-items:center;padding:.5rem}.pattern-name-text[_ngcontent-%COMP%]{height:3rem}"]})};function ut(n,e){n&1&&(i(0,"div",0),S(1,"app-game-pattern-section-list")(2,"app-pattern-list-component",3),o()),n&2&&(p(2),x("inGame",!0))}function ft(n,e){n&1&&(i(0,"h2"),r(1,"Configura tu partida para adjuntar patrones a sus rondas"),o())}var at=class n{roundService=m(h);ngOnInit(){this.roundService.getRounds()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=u({type:n,selectors:[["app-pattern-section"]],decls:5,vars:1,consts:[[1,"pattern-section-div"],[1,"next-step-div"],["mat-raised-button","","matStepperNext",""],[3,"inGame"]],template:function(t,a){t&1&&(C(0,ut,3,1,"div",0)(1,ft,2,0,"h2"),i(2,"div",1)(3,"button",2),r(4,"Siguiente"),o()()),t&2&&P(a.roundService.actualRounds().length>0?0:1)},dependencies:[N,B,T,Y],styles:[".pattern-section-div[_ngcontent-%COMP%]{display:flex;flex-direction:row;place-content:space-evenly}.next-step-div[_ngcontent-%COMP%]{display:flex;flex-direction:row;place-content:end}"]})};export{at as PatternSectionComponent};
